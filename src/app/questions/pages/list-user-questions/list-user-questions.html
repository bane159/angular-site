<app-layout>
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>My Questions</h2>
          <a class="btn btn-primary" routerLink="/ask-question">
            <i class="fas fa-plus me-2"></i>Ask Question
          </a>
        </div>

        <div class="question-stats mb-3">
          <span class="text-muted">{{ questions.length ? questions.length : 0 }} question(s) found</span>
        </div>

        @if (isLoading) {
          <div class="d-flex justify-content-center my-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        }

    

        @if(questions.length > 0) {
          <div class="questions-container">
            @for(question of questions; track question.id) {
              <div class="card mb-3 question-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <h5 class="card-title">
                        <a [routerLink]="['/question', question.id]" class="text-decoration-none">
                          {{ question.title }}
                        </a>
                      </h5>
                      <p class="card-text text-muted">
                        {{ question.content.substring(0, 150) }}{{ question.content.length > 150 ? '...' : '' }}
                      </p>
                      
                      <!-- Tags -->
                      <div class="mb-2">
                        @for(tag of question.tags; track $index) {
                          <span class="badge bg-secondary me-1">{{ tag }}</span>
                        }
                      </div>
                      
                      <!-- Question Stats -->
                      <div class="d-flex gap-3 text-muted small">
                        <span><i class="fas fa-eye me-1"></i>{{ question.numberOfViews }} views</span>
                        <span><i class="fas fa-comment me-1"></i>{{ question.numberOfComments }} comments</span>
                        <span><i class="fas fa-check-circle me-1"></i>{{ question.numberOfAnswers }} answers</span>
                        <span><i class="fas fa-clock me-1"></i>{{ question.askedAt | date:'short' }}</span>
                      </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="col-md-4">
                     
                        <div class="d-flex flex-column gap-2 h-100 justify-content-center">
                          <button 
                            class="btn btn-outline-primary btn-sm"
                            (click)="editQuestion(question.id)"
                            
                          >
                            <i class="fas fa-edit me-1"></i>Edit
                          </button>
                            @if(isDeleting) {
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            }
                          <button 
                            class="btn btn-outline-danger btn-sm"
                            (click)="deleteQuestion(question.id)"
                            [disabled]="isDeleting"
                            
                          >
                            <i class="fas fa-trash me-1"></i>Delete
                          </button>
                        </div>
                        
                      
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        }
        @else {
          <div class="text-center py-5">
            <div class="mb-3">
              <i class="fas fa-question-circle fa-3x text-muted"></i>
            </div>
            <h4>No questions found</h4>
            <p class="text-muted">You haven't asked any questions yet.</p>
            <a class="btn btn-primary" routerLink="/ask-question">Ask Your First Question</a>
          </div>
        }
      </div>
    </div>
  </div>
</app-layout>